<<<<<<< HEAD
# ğŸ”— Dashboard Connections & Data Flow

*How VendorConnect dashboards communicate and sync*

---

## ğŸ“Š Connection Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        VENDORCONNECT DATA FLOW                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚                         â”‚   SUPER ADMIN    â”‚                                â”‚
â”‚                         â”‚   (Full Control) â”‚                                â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                  â”‚                                          â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚              â”‚                   â”‚                   â”‚                      â”‚
â”‚              â–¼                   â–¼                   â–¼                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚     â”‚ PROJECT MANAGERâ”‚  â”‚    VENDOR      â”‚  â”‚  COMPANY REP   â”‚             â”‚
â”‚     â”‚  (Projects)    â”‚â—„â”€â”¤  (Machines)    â”‚  â”‚  (Corporate)   â”‚             â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚             â”‚                   â”‚                   â”‚                      â”‚
â”‚             â”‚                   â”‚                   â”‚                      â”‚
â”‚             â–¼                   â–¼                   â”‚                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚                      â”‚
â”‚     â”‚  SUPERVISOR    â”‚â—„â”€â”¤   Machine      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚     â”‚  (Field Ops)   â”‚  â”‚   Locations    â”‚                                 â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚             â”‚                                                               â”‚
â”‚             â–¼                                                               â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                     â”‚
â”‚     â”‚     GUEST      â”‚ (Read-only access)                                  â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                     â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Connection Points by Feature

### 1. USER MANAGEMENT

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ USER REGISTRATION & VERIFICATION FLOW                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  User Signs Up â”€â”€â–º Under Verification â”€â”€â–º Super Admin Reviews  â”‚
â”‚       â”‚                                        â”‚               â”‚
â”‚       â–¼                                        â–¼               â”‚
â”‚  Creates account                    Approve/Reject with role   â”‚
â”‚  in PENDING state                          â”‚                   â”‚
â”‚                                            â–¼                   â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                              â”‚ User activated with role:   â”‚   â”‚
â”‚                              â”‚ â€¢ PM â†’ PM Dashboard         â”‚   â”‚
â”‚                              â”‚ â€¢ Vendor â†’ Vendor Dashboard â”‚   â”‚
â”‚                              â”‚ â€¢ Supervisor â†’ Supervisor   â”‚   â”‚
â”‚                              â”‚ â€¢ Company â†’ Company Rep     â”‚   â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**APIs Involved:**
| Action | Source Dashboard | API | Target Dashboard |
|--------|------------------|-----|------------------|
| User registers | Public | `POST /api/registration/step1-3` | N/A |
| Submit for verification | Public | `POST /api/registration/submit` | Super Admin (pending list) |
| Approve user | Super Admin | `PUT /api/admin/users/{id}` | User (activated) |
| Reject user | Super Admin | `PUT /api/admin/users/{id}` | User (notification) |

---

### 2. PROJECT LIFECYCLE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PROJECT CREATION & MANAGEMENT FLOW                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  PM Creates Project                                            â”‚
â”‚       â”‚                                                        â”‚
â”‚       â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ Add Members â”‚â”€â”€â”€â–ºâ”‚ Assign      â”‚â”€â”€â”€â–ºâ”‚ Create      â”‚        â”‚
â”‚  â”‚ Supervisors â”‚    â”‚ Machines    â”‚    â”‚ Milestones  â”‚        â”‚
â”‚  â”‚ Vendors     â”‚    â”‚ (Vendor)    â”‚    â”‚ & Tasks     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                  â”‚                  â”‚               â”‚
â”‚         â–¼                  â–¼                  â–¼               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚            DASHBOARDS RECEIVE UPDATES            â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ Supervisor: Project appears in "Assigned"       â”‚          â”‚
â”‚  â”‚ Vendor: Project shows in "My Projects"          â”‚          â”‚
â”‚  â”‚ Super Admin: Project visible in "All Projects"  â”‚          â”‚
â”‚  â”‚ Company Rep: Employees assigned visible         â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**APIs Involved:**
| Action | Source | API | Targets |
|--------|--------|-----|---------|
| Create project | PM | `POST /api/projects` | Super Admin, Guest |
| Assign members | PM | `POST /api/projects/{id}/members` | Supervisor, Vendor |
| Update status | PM | `PUT /api/projects/{id}` | All dashboards |
| Delete project | Super Admin | `DELETE /api/projects/{id}` | All members |

---

### 3. MACHINE ASSIGNMENT & TRACKING

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MACHINE LIFECYCLE FLOW                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  Vendor Adds Machine                                           â”‚
â”‚       â”‚                                                        â”‚
â”‚       â–¼                                                        â”‚
â”‚  Machine in Registry (AVAILABLE)                               â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ PM checks availability                    â”‚
â”‚       â”‚                                                        â”‚
â”‚       â–¼                                                        â”‚
â”‚  PM Assigns to Project                                         â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”œâ”€â”€â”€â”€â–º Vendor: Assignment notification                   â”‚
â”‚       â”œâ”€â”€â”€â”€â–º Supervisor: Machine appears in "My Machines"      â”‚
â”‚       â”œâ”€â”€â”€â”€â–º Company Rep: Fleet utilization updates            â”‚
â”‚       â”‚                                                        â”‚
â”‚       â–¼                                                        â”‚
â”‚  Machine Status = ASSIGNED                                     â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”œâ”€â”€â”€â”€â–º Supervisor: Updates location (GPS)                â”‚
â”‚       â”œâ”€â”€â”€â”€â–º Vendor: Logs maintenance                          â”‚
â”‚       â”‚                                                        â”‚
â”‚       â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ LIVE LOCATION TRACKING                           â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ Super Admin: Live map of all machines            â”‚          â”‚
â”‚  â”‚ PM: Project-specific machine locations           â”‚          â”‚
â”‚  â”‚ Vendor: Own fleet locations                      â”‚          â”‚
â”‚  â”‚ Company Rep: Company fleet overview              â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**APIs Involved:**
| Action | Source | API | Targets |
|--------|--------|-----|---------|
| Add machine | Vendor | `POST /api/machines` | Super Admin (registry) |
| Check availability | PM | `GET /api/machines/availability` | Self |
| Assign machine | PM | `POST /api/machines/{id}/assign` | Vendor, Supervisor |
| Update location | Supervisor/Vendor | `POST /api/location/update` | PM, Admin, Company Rep |
| Get locations | PM | `GET /api/location/project/{id}` | Self |
| Log maintenance | Vendor | `POST /api/maintenance` | PM, Admin |

---

### 4. DAILY REPORTS WORKFLOW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DAILY REPORT SUBMISSION & APPROVAL FLOW                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  Supervisor/Vendor submits Daily Report                        â”‚
â”‚       â”‚                                                        â”‚
â”‚       â–¼                                                        â”‚
â”‚  Report Status = SUBMITTED                                     â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”œâ”€â”€â”€â”€â–º PM Dashboard: "Pending Reports" count increases   â”‚
â”‚       â”œâ”€â”€â”€â”€â–º Notification: PM receives alert                   â”‚
â”‚       â”‚                                                        â”‚
â”‚       â–¼                                                        â”‚
â”‚  PM Reviews Report                                             â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”œâ”€â”€â”€ APPROVE â”€â”€â”€â–º Supervisor: Notification               â”‚
â”‚       â”‚                 Company Rep: Report visible            â”‚
â”‚       â”‚                 AI: Included in analysis               â”‚
â”‚       â”‚                                                        â”‚
â”‚       â””â”€â”€â”€ REJECT â”€â”€â”€â”€â–º Supervisor: Resubmit notification      â”‚
â”‚                                                                â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ REPORT DATA FLOWS TO:                            â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ â€¢ Project Progress (auto-calculated)             â”‚          â”‚
â”‚  â”‚ â€¢ Budget Tracking (materials, hours)             â”‚          â”‚
â”‚  â”‚ â€¢ Milestone Updates                              â”‚          â”‚
â”‚  â”‚ â€¢ AI Analytics & Predictions                     â”‚          â”‚
â”‚  â”‚ â€¢ Export Reports (CSV/Excel)                     â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**APIs Involved:**
| Action | Source | API | Targets |
|--------|--------|-----|---------|
| Submit report | Supervisor/Vendor | `POST /api/reports/daily` | PM (notification) |
| Get pending | PM | `GET /api/reports/project/{id}?today=true` | Self |
| Approve/Reject | PM | `PUT /api/reports/{id}` | Submitter (notification) |
| View aggregate | Admin | `GET /api/reports/project/{id}` | Self |
| Export | PM/Admin | `GET /api/reports/export` | Self |

---

### 5. LOCATION & GEO-FENCING

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LOCATION TRACKING & GEO-FENCE ALERTS                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ MOBILE APP (MAUI)                                â”‚          â”‚
â”‚  â”‚ Sends GPS every 5 mins:                          â”‚          â”‚
â”‚  â”‚ â€¢ Supervisor location                            â”‚          â”‚
â”‚  â”‚ â€¢ Machine location (if operator)                 â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                    â”‚                                           â”‚
â”‚                    â–¼                                           â”‚
â”‚            POST /api/location/update                           â”‚
â”‚                    â”‚                                           â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚       â–¼            â–¼            â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ MongoDB â”‚ â”‚ Machine â”‚ â”‚ Geo-Fence Check â”‚                  â”‚
â”‚  â”‚ Locationâ”‚ â”‚ lastLoc â”‚ â”‚ (Entry/Exit)    â”‚                  â”‚
â”‚  â”‚ Log     â”‚ â”‚ Update  â”‚ â”‚                 â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                   â”‚                            â”‚
â”‚                          If breach detected:                   â”‚
â”‚                                   â”‚                            â”‚
â”‚                                   â–¼                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ ALERTS SENT TO:                                  â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ â€¢ PM Dashboard: Real-time notification          â”‚          â”‚
â”‚  â”‚ â€¢ Super Admin: Alert log                        â”‚          â”‚
â”‚  â”‚ â€¢ Notification table: Push to mobile            â”‚          â”‚
â”‚  â”‚ â€¢ Audit Log: Security event recorded            â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**APIs Involved:**
| Action | Source | API | Targets |
|--------|--------|-----|---------|
| Update location | Mobile (MAUI) | `POST /api/location/update` | All trackers |
| Get project locations | PM | `GET /api/location/project/{id}` | Self |
| Get machine location | PM/Vendor | `GET /api/location/machine/{id}/latest` | Self |
| Create geo-fence | PM | `POST /api/geofence` | Location service |
| Get alerts | PM/Admin | `GET /api/notifications` | Self |

---

### 6. CHAT & ANNOUNCEMENTS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COMMUNICATION FLOW                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ PROJECT CHAT (One per project)                   â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚                                                  â”‚          â”‚
â”‚  â”‚   PM â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Supervisors   â”‚          â”‚
â”‚  â”‚    â–²                                    â–²        â”‚          â”‚
â”‚  â”‚    â”‚                                    â”‚        â”‚          â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Vendors â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚          â”‚
â”‚  â”‚                                                  â”‚          â”‚
â”‚  â”‚   All project members can:                       â”‚          â”‚
â”‚  â”‚   â€¢ Send messages                                â”‚          â”‚
â”‚  â”‚   â€¢ Attach photos                                â”‚          â”‚
â”‚  â”‚   â€¢ Reply to threads                             â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ ANNOUNCEMENTS (Broadcast)                        â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚                                                  â”‚          â”‚
â”‚  â”‚   GLOBAL â”€â”€â”€â”€â–º All Users                         â”‚          â”‚
â”‚  â”‚   (Super Admin only)                             â”‚          â”‚
â”‚  â”‚                                                  â”‚          â”‚
â”‚  â”‚   PROJECT â”€â”€â”€â–º Project Members                   â”‚          â”‚
â”‚  â”‚   (PM or Admin)                                  â”‚          â”‚
â”‚  â”‚                                                  â”‚          â”‚
â”‚  â”‚   VENDOR â”€â”€â”€â”€â–º Vendor's Employees                â”‚          â”‚
â”‚  â”‚   (Company Rep)                                  â”‚          â”‚
â”‚  â”‚                                                  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**APIs Involved:**
| Action | Source | API | Targets |
|--------|--------|-----|---------|
| Send chat | Any member | `POST /api/chat/{projectId}` | All project members |
| Get messages | Any member | `GET /api/chat/{projectId}` | Self |
| Create announcement | PM/Admin | `POST /api/announcements` | Scoped users |
| Mark as read | Any | `PUT /api/announcements/{id}/read` | Self |

---

### 7. NOTIFICATIONS PIPELINE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NOTIFICATION GENERATION & DELIVERY                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  TRIGGERS:                     NOTIFICATION SERVICE            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ Report      â”‚              â”‚                     â”‚         â”‚
â”‚  â”‚ Submitted   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                     â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚   Create Notif      â”‚         â”‚
â”‚  â”‚ User        â”‚              â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚         â”‚
â”‚  â”‚ Approved    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   â€¢ Type            â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚   â€¢ Priority        â”‚         â”‚
â”‚  â”‚ Machine     â”‚              â”‚   â€¢ Target User     â”‚         â”‚
â”‚  â”‚ Assigned    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   â€¢ Data payload    â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚                     â”‚         â”‚
â”‚  â”‚ Geofence    â”‚              â”‚                     â”‚         â”‚
â”‚  â”‚ Breach      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                     â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚                     â”‚         â”‚
â”‚  â”‚ Maintenance â”‚              â”‚                     â”‚         â”‚
â”‚  â”‚ Due         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                          â”‚                     â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚                          â–¼               â–¼               â–¼    â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚                   â”‚ IN-APP    â”‚   â”‚   PUSH    â”‚   â”‚  EMAIL  â”‚â”‚
â”‚                   â”‚ Bell Icon â”‚   â”‚ Mobile    â”‚   â”‚ (Future)â”‚â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 8. WORK HOURS & TIME TRACKING

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AUTOMATIC WORK HOUR TRACKING                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  Supervisor Mobile App                                         â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”œâ”€â”€â”€ Clock In (GPS tagged) â”€â”€â”€â–º WorkLog entry created    â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”œâ”€â”€â”€ During shift: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Location updates         â”‚
â”‚       â”‚    â€¢ Task progress                                     â”‚
â”‚       â”‚    â€¢ Break logging                                     â”‚
â”‚       â”‚                                                        â”‚
â”‚       â””â”€â”€â”€ Clock Out â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º WorkLog completed        â”‚
â”‚                                                                â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ DATA FLOWS TO:                                   â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ PM Dashboard: Team hours summary                 â”‚          â”‚
â”‚  â”‚ Project: Manpower utilization                    â”‚          â”‚
â”‚  â”‚ Payroll: (Future) Hours for payment              â”‚          â”‚
â”‚  â”‚ Reports: Included in daily summary               â”‚          â”‚
â”‚  â”‚ Analytics: Productivity metrics                  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”— Cross-Dashboard Data Sync Matrix

### Real-time Updates

| Event | Super Admin | PM | Supervisor | Vendor | Company Rep | Guest |
|-------|:-----------:|:--:|:----------:|:------:|:-----------:|:-----:|
| New user registration | ğŸ”” | - | - | - | - | - |
| Project created | ğŸ”” | ğŸ”” | - | - | - | ğŸ‘ï¸ |
| Member assigned | ğŸ”” | ğŸ”” | ğŸ”” | ğŸ”” | ğŸ”” | - |
| Machine assigned | ğŸ”” | ğŸ”” | ğŸ”” | ğŸ”” | ğŸ”” | - |
| Report submitted | ğŸ”” | ğŸ”” | - | - | ğŸ‘ï¸ | - |
| Report approved | - | - | ğŸ”” | ğŸ”” | ğŸ‘ï¸ | - |
| Location update | ğŸ‘ï¸ | ğŸ‘ï¸ | - | ğŸ‘ï¸ | ğŸ‘ï¸ | - |
| Geo-fence breach | ğŸ”” | ğŸ”” | ğŸ”” | ğŸ”” | ğŸ”” | - |
| Announcement | ğŸ”” | ğŸ”” | ğŸ”” | ğŸ”” | ğŸ”” | ğŸ‘ï¸ |
| Chat message | - | ğŸ”” | ğŸ”” | ğŸ”” | - | - |

*ğŸ”” = Notification | ğŸ‘ï¸ = View only (no notification)*

---

## ğŸ”Œ API Endpoints Summary by Connection

### User â†’ Admin
```
POST /api/registration/*     â†’ Admin pending list
```

### PM â†’ Team Members
```
POST /api/projects/{id}/members  â†’ Notifications to members
POST /api/machines/{id}/assign   â†’ Vendor/Supervisor notification
POST /api/announcements          â†’ Project members
```

### Supervisor/Vendor â†’ PM
```
POST /api/reports/daily          â†’ PM pending queue
POST /api/location/update        â†’ PM map view
POST /api/chat/{projectId}       â†’ PM chat
```

### Mobile â†’ Server
```
POST /api/location/update        â†’ All location trackers
POST /api/worklog                â†’ Time tracking
```

### Server â†’ Mobile (Push)
```
GET /api/notifications           â†’ Bell icon + push
WebSocket (future)               â†’ Real-time updates
```

---

## ğŸ”„ Shared Data Collections

### Collections & Accessors

| Collection | Super Admin | PM | Supervisor | Vendor | Company Rep | Guest |
|------------|:-----------:|:--:|:----------:|:------:|:-----------:|:-----:|
| Users | RWD | R (team) | R (self) | R (self) | R (employees) | - |
| Projects | RWD | RW (own) | R (assigned) | R (assigned) | R (company) | R (public) |
| Machines | RWD | R | R (assigned) | RW (own) | R (company) | - |
| Locations | R | R (project) | RW (self) | RW (own) | R (company) | - |
| Reports | RW | RW (approve) | RW (own) | RW (own) | R (company) | - |
| Chat | RW | RW | RW | RW | R | - |
| Notifications | RW | RW | RW | RW | RW | - |
| Audit Logs | R | - | - | - | - | - |

*R = Read | W = Write | D = Delete*

---

## ğŸ—ï¸ Implementation Notes

### 1. Real-time Updates Strategy
```typescript
// Option A: Polling (simpler)
useEffect(() => {
  const interval = setInterval(fetchNotifications, 30000) // 30 sec
  return () => clearInterval(interval)
}, [])

// Option B: WebSocket (future)
socket.on('notification', handleNewNotification)
```

### 2. Notification Creation Pattern
```typescript
// When report is submitted
async function submitReport(reportData) {
  const report = await DailyReport.create(reportData)
  
  // Create notification for PM
  await Notification.create({
    userId: project.pmId,
    type: 'REPORT_SUBMITTED',
    title: 'New Daily Report',
    message: `${submitter.name} submitted a report`,
    data: { reportId: report._id, projectId }
  })
}
```

### 3. Permission Check Pattern
```typescript
// Middleware for role-based access
function requireRole(allowedRoles: string[]) {
  return async (req, res, next) => {
    const user = await User.findById(req.userId)
    if (!allowedRoles.includes(user.requestedRole)) {
      return res.status(403).json({ error: 'FORBIDDEN' })
    }
    next()
  }
}
```

---

## ğŸ“± MAUI Integration Points

| Feature | API Call | Dashboard Update |
|---------|----------|------------------|
| Login | `POST /api/auth/login` | Get role, load dashboard |
| Clock In | `POST /api/worklog` | Supervisor status |
| GPS Update | `POST /api/location/update` | PM/Admin maps |
| Submit Report | `POST /api/reports/daily` | PM pending count |
| Send Chat | `POST /api/chat/{id}` | All members |
| Get Notifications | `GET /api/notifications` | Bell badge |

---

## ğŸ¯ 9. PROJECT BIDDING WORKFLOW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BIDDING FLOW - VENDOR/SUPERVISOR PARTICIPATION                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  PM Creates Project (PLANNING/ACTIVE)                          â”‚
â”‚       â”‚                                                        â”‚
â”‚       â–¼                                                        â”‚
â”‚  Project visible in "Open for Bidding"                         â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”œâ”€â”€â”€â”€â–º Vendor sees in dashboard                          â”‚
â”‚       â”œâ”€â”€â”€â”€â–º Supervisor sees in dashboard                      â”‚
â”‚       â”‚                                                        â”‚
â”‚       â–¼                                                        â”‚
â”‚  Vendor/Supervisor Submits Bid                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â€¢ Proposed amount                                        â”‚  â”‚
â”‚  â”‚ â€¢ Timeline (start/end dates)                             â”‚  â”‚
â”‚  â”‚ â€¢ Machines offered                                       â”‚  â”‚
â”‚  â”‚ â€¢ Manpower available                                     â”‚  â”‚
â”‚  â”‚ â€¢ Proposal description                                   â”‚  â”‚
â”‚  â”‚ âš ï¸ Contact info (email/phone) HIDDEN at this stage      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                               â”‚                                â”‚
â”‚                               â–¼                                â”‚
â”‚  PM Receives Notification: "New bid from [Name]"               â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”œâ”€â”€â”€â”€â–º PM views bids (contact masked)                    â”‚
â”‚       â”‚      ***@***.com | **********                          â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚       â”‚           â”‚ PM Reviews & Decides       â”‚               â”‚
â”‚       â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚       â”‚                         â”‚                              â”‚
â”‚       â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚       â”‚           â–¼                           â–¼                â”‚
â”‚       â”‚    âœ… APPROVE                   âŒ REJECT              â”‚
â”‚       â”‚           â”‚                           â”‚                â”‚
â”‚       â”‚           â–¼                           â–¼                â”‚
â”‚       â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚       â”‚    â”‚ Contact VISIBLE  â”‚    â”‚ Contact stays    â”‚       â”‚
â”‚       â”‚    â”‚ Auto-add to team â”‚    â”‚ hidden           â”‚       â”‚
â”‚       â”‚    â”‚ Notification sentâ”‚    â”‚ Reason provided  â”‚       â”‚
â”‚       â”‚    â”‚ "ğŸ‰ Bid Approved"â”‚    â”‚ Notification sentâ”‚       â”‚
â”‚       â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Contact Visibility Rules

| Bid Status | PM Can See Contact | Bidder Sees Own |
|------------|:------------------:|:---------------:|
| SUBMITTED | âŒ Masked | âœ… |
| UNDER_REVIEW | âŒ Masked | âœ… |
| **APPROVED** | âœ… **VISIBLE** | âœ… |
| REJECTED | âŒ Masked | âœ… |

**APIs Involved:**
| Action | Source | API | Targets |
|--------|--------|-----|---------|
| Get open projects | Vendor/Supervisor | `GET /api/bids/open` | Self |
| Submit bid | Vendor/Supervisor | `POST /api/projects/{id}/bids` | PM notification |
| Get my bids | Vendor/Supervisor | `GET /api/bids/my` | Self |
| View project bids | PM/Admin | `GET /api/projects/{id}/bids` | Self (masked) |
| Approve bid | PM/Admin | `PUT /api/bids/{id}` (action=APPROVE) | Bidder notification |
| Reject bid | PM/Admin | `PUT /api/bids/{id}` (action=REJECT) | Bidder notification |

### Bidding Notification Events

| Event | Recipients | Notification |
|-------|------------|--------------|
| Bid Submitted | PM, Admin | "New bid from [Name] for [Project]" |
| Bid Approved | Bidder | "ğŸ‰ Your bid was approved!" |
| Bid Rejected | Bidder | "Bid not selected: [reason]" |

---

*Last Updated: December 2024*
*Document Version: 1.0*
=======
# ğŸ”— Dashboard Connections & Data Flow

*How VendorConnect dashboards communicate and sync*

---

## ğŸ“Š Connection Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        VENDORCONNECT DATA FLOW                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚                         â”‚   SUPER ADMIN    â”‚                                â”‚
â”‚                         â”‚   (Full Control) â”‚                                â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                  â”‚                                          â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚              â”‚                   â”‚                   â”‚                      â”‚
â”‚              â–¼                   â–¼                   â–¼                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚     â”‚ PROJECT MANAGERâ”‚  â”‚    VENDOR      â”‚  â”‚  COMPANY REP   â”‚             â”‚
â”‚     â”‚  (Projects)    â”‚â—„â”€â”¤  (Machines)    â”‚  â”‚  (Corporate)   â”‚             â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚             â”‚                   â”‚                   â”‚                      â”‚
â”‚             â”‚                   â”‚                   â”‚                      â”‚
â”‚             â–¼                   â–¼                   â”‚                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚                      â”‚
â”‚     â”‚  SUPERVISOR    â”‚â—„â”€â”¤   Machine      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚     â”‚  (Field Ops)   â”‚  â”‚   Locations    â”‚                                 â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚             â”‚                                                               â”‚
â”‚             â–¼                                                               â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                     â”‚
â”‚     â”‚     GUEST      â”‚ (Read-only access)                                  â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                     â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Connection Points by Feature

### 1. USER MANAGEMENT

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ USER REGISTRATION & VERIFICATION FLOW                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  User Signs Up â”€â”€â–º Under Verification â”€â”€â–º Super Admin Reviews  â”‚
â”‚       â”‚                                        â”‚               â”‚
â”‚       â–¼                                        â–¼               â”‚
â”‚  Creates account                    Approve/Reject with role   â”‚
â”‚  in PENDING state                          â”‚                   â”‚
â”‚                                            â–¼                   â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                              â”‚ User activated with role:   â”‚   â”‚
â”‚                              â”‚ â€¢ PM â†’ PM Dashboard         â”‚   â”‚
â”‚                              â”‚ â€¢ Vendor â†’ Vendor Dashboard â”‚   â”‚
â”‚                              â”‚ â€¢ Supervisor â†’ Supervisor   â”‚   â”‚
â”‚                              â”‚ â€¢ Company â†’ Company Rep     â”‚   â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**APIs Involved:**
| Action | Source Dashboard | API | Target Dashboard |
|--------|------------------|-----|------------------|
| User registers | Public | `POST /api/registration/step1-3` | N/A |
| Submit for verification | Public | `POST /api/registration/submit` | Super Admin (pending list) |
| Approve user | Super Admin | `PUT /api/admin/users/{id}` | User (activated) |
| Reject user | Super Admin | `PUT /api/admin/users/{id}` | User (notification) |

---

### 2. PROJECT LIFECYCLE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PROJECT CREATION & MANAGEMENT FLOW                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  PM Creates Project                                            â”‚
â”‚       â”‚                                                        â”‚
â”‚       â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ Add Members â”‚â”€â”€â”€â–ºâ”‚ Assign      â”‚â”€â”€â”€â–ºâ”‚ Create      â”‚        â”‚
â”‚  â”‚ Supervisors â”‚    â”‚ Machines    â”‚    â”‚ Milestones  â”‚        â”‚
â”‚  â”‚ Vendors     â”‚    â”‚ (Vendor)    â”‚    â”‚ & Tasks     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                  â”‚                  â”‚               â”‚
â”‚         â–¼                  â–¼                  â–¼               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚            DASHBOARDS RECEIVE UPDATES            â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ Supervisor: Project appears in "Assigned"       â”‚          â”‚
â”‚  â”‚ Vendor: Project shows in "My Projects"          â”‚          â”‚
â”‚  â”‚ Super Admin: Project visible in "All Projects"  â”‚          â”‚
â”‚  â”‚ Company Rep: Employees assigned visible         â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**APIs Involved:**
| Action | Source | API | Targets |
|--------|--------|-----|---------|
| Create project | PM | `POST /api/projects` | Super Admin, Guest |
| Assign members | PM | `POST /api/projects/{id}/members` | Supervisor, Vendor |
| Update status | PM | `PUT /api/projects/{id}` | All dashboards |
| Delete project | Super Admin | `DELETE /api/projects/{id}` | All members |

---

### 3. MACHINE ASSIGNMENT & TRACKING

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MACHINE LIFECYCLE FLOW                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  Vendor Adds Machine                                           â”‚
â”‚       â”‚                                                        â”‚
â”‚       â–¼                                                        â”‚
â”‚  Machine in Registry (AVAILABLE)                               â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ PM checks availability                    â”‚
â”‚       â”‚                                                        â”‚
â”‚       â–¼                                                        â”‚
â”‚  PM Assigns to Project                                         â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”œâ”€â”€â”€â”€â–º Vendor: Assignment notification                   â”‚
â”‚       â”œâ”€â”€â”€â”€â–º Supervisor: Machine appears in "My Machines"      â”‚
â”‚       â”œâ”€â”€â”€â”€â–º Company Rep: Fleet utilization updates            â”‚
â”‚       â”‚                                                        â”‚
â”‚       â–¼                                                        â”‚
â”‚  Machine Status = ASSIGNED                                     â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”œâ”€â”€â”€â”€â–º Supervisor: Updates location (GPS)                â”‚
â”‚       â”œâ”€â”€â”€â”€â–º Vendor: Logs maintenance                          â”‚
â”‚       â”‚                                                        â”‚
â”‚       â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ LIVE LOCATION TRACKING                           â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ Super Admin: Live map of all machines            â”‚          â”‚
â”‚  â”‚ PM: Project-specific machine locations           â”‚          â”‚
â”‚  â”‚ Vendor: Own fleet locations                      â”‚          â”‚
â”‚  â”‚ Company Rep: Company fleet overview              â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**APIs Involved:**
| Action | Source | API | Targets |
|--------|--------|-----|---------|
| Add machine | Vendor | `POST /api/machines` | Super Admin (registry) |
| Check availability | PM | `GET /api/machines/availability` | Self |
| Assign machine | PM | `POST /api/machines/{id}/assign` | Vendor, Supervisor |
| Update location | Supervisor/Vendor | `POST /api/location/update` | PM, Admin, Company Rep |
| Get locations | PM | `GET /api/location/project/{id}` | Self |
| Log maintenance | Vendor | `POST /api/maintenance` | PM, Admin |

---

### 4. DAILY REPORTS WORKFLOW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DAILY REPORT SUBMISSION & APPROVAL FLOW                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  Supervisor/Vendor submits Daily Report                        â”‚
â”‚       â”‚                                                        â”‚
â”‚       â–¼                                                        â”‚
â”‚  Report Status = SUBMITTED                                     â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”œâ”€â”€â”€â”€â–º PM Dashboard: "Pending Reports" count increases   â”‚
â”‚       â”œâ”€â”€â”€â”€â–º Notification: PM receives alert                   â”‚
â”‚       â”‚                                                        â”‚
â”‚       â–¼                                                        â”‚
â”‚  PM Reviews Report                                             â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”œâ”€â”€â”€ APPROVE â”€â”€â”€â–º Supervisor: Notification               â”‚
â”‚       â”‚                 Company Rep: Report visible            â”‚
â”‚       â”‚                 AI: Included in analysis               â”‚
â”‚       â”‚                                                        â”‚
â”‚       â””â”€â”€â”€ REJECT â”€â”€â”€â”€â–º Supervisor: Resubmit notification      â”‚
â”‚                                                                â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ REPORT DATA FLOWS TO:                            â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ â€¢ Project Progress (auto-calculated)             â”‚          â”‚
â”‚  â”‚ â€¢ Budget Tracking (materials, hours)             â”‚          â”‚
â”‚  â”‚ â€¢ Milestone Updates                              â”‚          â”‚
â”‚  â”‚ â€¢ AI Analytics & Predictions                     â”‚          â”‚
â”‚  â”‚ â€¢ Export Reports (CSV/Excel)                     â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**APIs Involved:**
| Action | Source | API | Targets |
|--------|--------|-----|---------|
| Submit report | Supervisor/Vendor | `POST /api/reports/daily` | PM (notification) |
| Get pending | PM | `GET /api/reports/project/{id}?today=true` | Self |
| Approve/Reject | PM | `PUT /api/reports/{id}` | Submitter (notification) |
| View aggregate | Admin | `GET /api/reports/project/{id}` | Self |
| Export | PM/Admin | `GET /api/reports/export` | Self |

---

### 5. LOCATION & GEO-FENCING

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LOCATION TRACKING & GEO-FENCE ALERTS                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ MOBILE APP (MAUI)                                â”‚          â”‚
â”‚  â”‚ Sends GPS every 5 mins:                          â”‚          â”‚
â”‚  â”‚ â€¢ Supervisor location                            â”‚          â”‚
â”‚  â”‚ â€¢ Machine location (if operator)                 â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                    â”‚                                           â”‚
â”‚                    â–¼                                           â”‚
â”‚            POST /api/location/update                           â”‚
â”‚                    â”‚                                           â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚       â–¼            â–¼            â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ MongoDB â”‚ â”‚ Machine â”‚ â”‚ Geo-Fence Check â”‚                  â”‚
â”‚  â”‚ Locationâ”‚ â”‚ lastLoc â”‚ â”‚ (Entry/Exit)    â”‚                  â”‚
â”‚  â”‚ Log     â”‚ â”‚ Update  â”‚ â”‚                 â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                   â”‚                            â”‚
â”‚                          If breach detected:                   â”‚
â”‚                                   â”‚                            â”‚
â”‚                                   â–¼                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ ALERTS SENT TO:                                  â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ â€¢ PM Dashboard: Real-time notification          â”‚          â”‚
â”‚  â”‚ â€¢ Super Admin: Alert log                        â”‚          â”‚
â”‚  â”‚ â€¢ Notification table: Push to mobile            â”‚          â”‚
â”‚  â”‚ â€¢ Audit Log: Security event recorded            â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**APIs Involved:**
| Action | Source | API | Targets |
|--------|--------|-----|---------|
| Update location | Mobile (MAUI) | `POST /api/location/update` | All trackers |
| Get project locations | PM | `GET /api/location/project/{id}` | Self |
| Get machine location | PM/Vendor | `GET /api/location/machine/{id}/latest` | Self |
| Create geo-fence | PM | `POST /api/geofence` | Location service |
| Get alerts | PM/Admin | `GET /api/notifications` | Self |

---

### 6. CHAT & ANNOUNCEMENTS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COMMUNICATION FLOW                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ PROJECT CHAT (One per project)                   â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚                                                  â”‚          â”‚
â”‚  â”‚   PM â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Supervisors   â”‚          â”‚
â”‚  â”‚    â–²                                    â–²        â”‚          â”‚
â”‚  â”‚    â”‚                                    â”‚        â”‚          â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Vendors â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚          â”‚
â”‚  â”‚                                                  â”‚          â”‚
â”‚  â”‚   All project members can:                       â”‚          â”‚
â”‚  â”‚   â€¢ Send messages                                â”‚          â”‚
â”‚  â”‚   â€¢ Attach photos                                â”‚          â”‚
â”‚  â”‚   â€¢ Reply to threads                             â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ ANNOUNCEMENTS (Broadcast)                        â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚                                                  â”‚          â”‚
â”‚  â”‚   GLOBAL â”€â”€â”€â”€â–º All Users                         â”‚          â”‚
â”‚  â”‚   (Super Admin only)                             â”‚          â”‚
â”‚  â”‚                                                  â”‚          â”‚
â”‚  â”‚   PROJECT â”€â”€â”€â–º Project Members                   â”‚          â”‚
â”‚  â”‚   (PM or Admin)                                  â”‚          â”‚
â”‚  â”‚                                                  â”‚          â”‚
â”‚  â”‚   VENDOR â”€â”€â”€â”€â–º Vendor's Employees                â”‚          â”‚
â”‚  â”‚   (Company Rep)                                  â”‚          â”‚
â”‚  â”‚                                                  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**APIs Involved:**
| Action | Source | API | Targets |
|--------|--------|-----|---------|
| Send chat | Any member | `POST /api/chat/{projectId}` | All project members |
| Get messages | Any member | `GET /api/chat/{projectId}` | Self |
| Create announcement | PM/Admin | `POST /api/announcements` | Scoped users |
| Mark as read | Any | `PUT /api/announcements/{id}/read` | Self |

---

### 7. NOTIFICATIONS PIPELINE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NOTIFICATION GENERATION & DELIVERY                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  TRIGGERS:                     NOTIFICATION SERVICE            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ Report      â”‚              â”‚                     â”‚         â”‚
â”‚  â”‚ Submitted   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                     â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚   Create Notif      â”‚         â”‚
â”‚  â”‚ User        â”‚              â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚         â”‚
â”‚  â”‚ Approved    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   â€¢ Type            â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚   â€¢ Priority        â”‚         â”‚
â”‚  â”‚ Machine     â”‚              â”‚   â€¢ Target User     â”‚         â”‚
â”‚  â”‚ Assigned    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   â€¢ Data payload    â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚                     â”‚         â”‚
â”‚  â”‚ Geofence    â”‚              â”‚                     â”‚         â”‚
â”‚  â”‚ Breach      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                     â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚                     â”‚         â”‚
â”‚  â”‚ Maintenance â”‚              â”‚                     â”‚         â”‚
â”‚  â”‚ Due         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                          â”‚                     â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚                          â–¼               â–¼               â–¼    â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚                   â”‚ IN-APP    â”‚   â”‚   PUSH    â”‚   â”‚  EMAIL  â”‚â”‚
â”‚                   â”‚ Bell Icon â”‚   â”‚ Mobile    â”‚   â”‚ (Future)â”‚â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 8. WORK HOURS & TIME TRACKING

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AUTOMATIC WORK HOUR TRACKING                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  Supervisor Mobile App                                         â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”œâ”€â”€â”€ Clock In (GPS tagged) â”€â”€â”€â–º WorkLog entry created    â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”œâ”€â”€â”€ During shift: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Location updates         â”‚
â”‚       â”‚    â€¢ Task progress                                     â”‚
â”‚       â”‚    â€¢ Break logging                                     â”‚
â”‚       â”‚                                                        â”‚
â”‚       â””â”€â”€â”€ Clock Out â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º WorkLog completed        â”‚
â”‚                                                                â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ DATA FLOWS TO:                                   â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ PM Dashboard: Team hours summary                 â”‚          â”‚
â”‚  â”‚ Project: Manpower utilization                    â”‚          â”‚
â”‚  â”‚ Payroll: (Future) Hours for payment              â”‚          â”‚
â”‚  â”‚ Reports: Included in daily summary               â”‚          â”‚
â”‚  â”‚ Analytics: Productivity metrics                  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”— Cross-Dashboard Data Sync Matrix

### Real-time Updates

| Event | Super Admin | PM | Supervisor | Vendor | Company Rep | Guest |
|-------|:-----------:|:--:|:----------:|:------:|:-----------:|:-----:|
| New user registration | ğŸ”” | - | - | - | - | - |
| Project created | ğŸ”” | ğŸ”” | - | - | - | ğŸ‘ï¸ |
| Member assigned | ğŸ”” | ğŸ”” | ğŸ”” | ğŸ”” | ğŸ”” | - |
| Machine assigned | ğŸ”” | ğŸ”” | ğŸ”” | ğŸ”” | ğŸ”” | - |
| Report submitted | ğŸ”” | ğŸ”” | - | - | ğŸ‘ï¸ | - |
| Report approved | - | - | ğŸ”” | ğŸ”” | ğŸ‘ï¸ | - |
| Location update | ğŸ‘ï¸ | ğŸ‘ï¸ | - | ğŸ‘ï¸ | ğŸ‘ï¸ | - |
| Geo-fence breach | ğŸ”” | ğŸ”” | ğŸ”” | ğŸ”” | ğŸ”” | - |
| Announcement | ğŸ”” | ğŸ”” | ğŸ”” | ğŸ”” | ğŸ”” | ğŸ‘ï¸ |
| Chat message | - | ğŸ”” | ğŸ”” | ğŸ”” | - | - |

*ğŸ”” = Notification | ğŸ‘ï¸ = View only (no notification)*

---

## ğŸ”Œ API Endpoints Summary by Connection

### User â†’ Admin
```
POST /api/registration/*     â†’ Admin pending list
```

### PM â†’ Team Members
```
POST /api/projects/{id}/members  â†’ Notifications to members
POST /api/machines/{id}/assign   â†’ Vendor/Supervisor notification
POST /api/announcements          â†’ Project members
```

### Supervisor/Vendor â†’ PM
```
POST /api/reports/daily          â†’ PM pending queue
POST /api/location/update        â†’ PM map view
POST /api/chat/{projectId}       â†’ PM chat
```

### Mobile â†’ Server
```
POST /api/location/update        â†’ All location trackers
POST /api/worklog                â†’ Time tracking
```

### Server â†’ Mobile (Push)
```
GET /api/notifications           â†’ Bell icon + push
WebSocket (future)               â†’ Real-time updates
```

---

## ğŸ”„ Shared Data Collections

### Collections & Accessors

| Collection | Super Admin | PM | Supervisor | Vendor | Company Rep | Guest |
|------------|:-----------:|:--:|:----------:|:------:|:-----------:|:-----:|
| Users | RWD | R (team) | R (self) | R (self) | R (employees) | - |
| Projects | RWD | RW (own) | R (assigned) | R (assigned) | R (company) | R (public) |
| Machines | RWD | R | R (assigned) | RW (own) | R (company) | - |
| Locations | R | R (project) | RW (self) | RW (own) | R (company) | - |
| Reports | RW | RW (approve) | RW (own) | RW (own) | R (company) | - |
| Chat | RW | RW | RW | RW | R | - |
| Notifications | RW | RW | RW | RW | RW | - |
| Audit Logs | R | - | - | - | - | - |

*R = Read | W = Write | D = Delete*

---

## ğŸ—ï¸ Implementation Notes

### 1. Real-time Updates Strategy
```typescript
// Option A: Polling (simpler)
useEffect(() => {
  const interval = setInterval(fetchNotifications, 30000) // 30 sec
  return () => clearInterval(interval)
}, [])

// Option B: WebSocket (future)
socket.on('notification', handleNewNotification)
```

### 2. Notification Creation Pattern
```typescript
// When report is submitted
async function submitReport(reportData) {
  const report = await DailyReport.create(reportData)
  
  // Create notification for PM
  await Notification.create({
    userId: project.pmId,
    type: 'REPORT_SUBMITTED',
    title: 'New Daily Report',
    message: `${submitter.name} submitted a report`,
    data: { reportId: report._id, projectId }
  })
}
```

### 3. Permission Check Pattern
```typescript
// Middleware for role-based access
function requireRole(allowedRoles: string[]) {
  return async (req, res, next) => {
    const user = await User.findById(req.userId)
    if (!allowedRoles.includes(user.requestedRole)) {
      return res.status(403).json({ error: 'FORBIDDEN' })
    }
    next()
  }
}
```

---

## ğŸ“± MAUI Integration Points

| Feature | API Call | Dashboard Update |
|---------|----------|------------------|
| Login | `POST /api/auth/login` | Get role, load dashboard |
| Clock In | `POST /api/worklog` | Supervisor status |
| GPS Update | `POST /api/location/update` | PM/Admin maps |
| Submit Report | `POST /api/reports/daily` | PM pending count |
| Send Chat | `POST /api/chat/{id}` | All members |
| Get Notifications | `GET /api/notifications` | Bell badge |

---

## ğŸ¯ 9. PROJECT BIDDING WORKFLOW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BIDDING FLOW - VENDOR/SUPERVISOR PARTICIPATION                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  PM Creates Project (PLANNING/ACTIVE)                          â”‚
â”‚       â”‚                                                        â”‚
â”‚       â–¼                                                        â”‚
â”‚  Project visible in "Open for Bidding"                         â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”œâ”€â”€â”€â”€â–º Vendor sees in dashboard                          â”‚
â”‚       â”œâ”€â”€â”€â”€â–º Supervisor sees in dashboard                      â”‚
â”‚       â”‚                                                        â”‚
â”‚       â–¼                                                        â”‚
â”‚  Vendor/Supervisor Submits Bid                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â€¢ Proposed amount                                        â”‚  â”‚
â”‚  â”‚ â€¢ Timeline (start/end dates)                             â”‚  â”‚
â”‚  â”‚ â€¢ Machines offered                                       â”‚  â”‚
â”‚  â”‚ â€¢ Manpower available                                     â”‚  â”‚
â”‚  â”‚ â€¢ Proposal description                                   â”‚  â”‚
â”‚  â”‚ âš ï¸ Contact info (email/phone) HIDDEN at this stage      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                               â”‚                                â”‚
â”‚                               â–¼                                â”‚
â”‚  PM Receives Notification: "New bid from [Name]"               â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”œâ”€â”€â”€â”€â–º PM views bids (contact masked)                    â”‚
â”‚       â”‚      ***@***.com | **********                          â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚       â”‚           â”‚ PM Reviews & Decides       â”‚               â”‚
â”‚       â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚       â”‚                         â”‚                              â”‚
â”‚       â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚       â”‚           â–¼                           â–¼                â”‚
â”‚       â”‚    âœ… APPROVE                   âŒ REJECT              â”‚
â”‚       â”‚           â”‚                           â”‚                â”‚
â”‚       â”‚           â–¼                           â–¼                â”‚
â”‚       â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚       â”‚    â”‚ Contact VISIBLE  â”‚    â”‚ Contact stays    â”‚       â”‚
â”‚       â”‚    â”‚ Auto-add to team â”‚    â”‚ hidden           â”‚       â”‚
â”‚       â”‚    â”‚ Notification sentâ”‚    â”‚ Reason provided  â”‚       â”‚
â”‚       â”‚    â”‚ "ğŸ‰ Bid Approved"â”‚    â”‚ Notification sentâ”‚       â”‚
â”‚       â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Contact Visibility Rules

| Bid Status | PM Can See Contact | Bidder Sees Own |
|------------|:------------------:|:---------------:|
| SUBMITTED | âŒ Masked | âœ… |
| UNDER_REVIEW | âŒ Masked | âœ… |
| **APPROVED** | âœ… **VISIBLE** | âœ… |
| REJECTED | âŒ Masked | âœ… |

**APIs Involved:**
| Action | Source | API | Targets |
|--------|--------|-----|---------|
| Get open projects | Vendor/Supervisor | `GET /api/bids/open` | Self |
| Submit bid | Vendor/Supervisor | `POST /api/projects/{id}/bids` | PM notification |
| Get my bids | Vendor/Supervisor | `GET /api/bids/my` | Self |
| View project bids | PM/Admin | `GET /api/projects/{id}/bids` | Self (masked) |
| Approve bid | PM/Admin | `PUT /api/bids/{id}` (action=APPROVE) | Bidder notification |
| Reject bid | PM/Admin | `PUT /api/bids/{id}` (action=REJECT) | Bidder notification |

### Bidding Notification Events

| Event | Recipients | Notification |
|-------|------------|--------------|
| Bid Submitted | PM, Admin | "New bid from [Name] for [Project]" |
| Bid Approved | Bidder | "ğŸ‰ Your bid was approved!" |
| Bid Rejected | Bidder | "Bid not selected: [reason]" |

---

*Last Updated: December 2024*
*Document Version: 1.0*
>>>>>>> 1e7c767fd985a8b365fdb5ec78cc5cecdee02c84
